<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <meta name="description" content="Handmade crochet products - dolls, bags, clothing, and custom pieces. Quality craftsmanship with love.">
    <meta name="keywords" content="crochet, handmade, dolls, bags, clothing, custom, boneka rajut, tas rajut, baju rajut">
    <title>Artfulito - Handmade Crochet Creations</title>
    <!-- Update link CSS di index.html -->
    <link rel="stylesheet" href="css/style.css">
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link href="https://fonts.googleapis.com/css2?family=Poppins:wght@300;400;500;600&display=swap" rel="stylesheet">
    <link rel="icon" type="image/x-icon" href="data:image/svg+xml,<svg xmlns='http://www.w3.org/2000/svg' viewBox='0 0 100 100'><text y='.9em' font-size='90'>üß∂</text></svg>">
</head>
<body>
    <header class="header">
        <div class="container">
            <h1 class="logo">üß∂ Artfulito</h1>
            <p class="tagline">Handmade with Love</p>
        </div>
    </header>

    <main class="main">
        <div class="container">
            <!-- Search and Filter Section -->
            <div class="controls">
                <div class="search-container">
                    <input type="text" id="searchInput" placeholder="Search products..." class="search-input">
                </div>
                <div class="filter-container">
                    <button class="filter-btn active" data-category="all">All</button>
                    <button class="filter-btn" data-category="dolls">Dolls</button>
                    <button class="filter-btn" data-category="bags">Bags</button>
                    <button class="filter-btn" data-category="clothes">Clothes</button>
                    <button class="filter-btn" data-category="custom">Custom</button>
                </div>
            </div>

            <!-- Products Grid -->
            <div class="products-grid" id="productsGrid">
                <!-- Products will be loaded here dynamically -->
            </div>

            <!-- Custom Request Section -->
            <div class="custom-section" id="customSection" style="display: none;">
                <div class="custom-header">
                    <h2>üé® Custom Request</h2>
                    <p>Punya ide khusus? Kami siap mewujudkan kreasi rajutan impian Anda!</p>
                </div>
                
                <div class="custom-content">
                    <div class="custom-info">
                        <h3>Bagaimana Cara Memesan Custom?</h3>
                        <div class="steps">
                            <div class="step">
                                <div class="step-number">1</div>
                                <div class="step-content">
                                    <h4>Kirim Foto & Deskripsi</h4>
                                    <p>Kirimkan foto referensi atau deskripsi detail tentang produk yang Anda inginkan</p>
                                </div>
                            </div>
                            <div class="step">
                                <div class="step-number">2</div>
                                <div class="step-content">
                                    <h4>Konsultasi & Quote</h4>
                                    <p>Kami akan memberikan estimasi harga dan waktu pengerjaan</p>
                                </div>
                            </div>
                            <div class="step">
                                <div class="step-number">3</div>
                                <div class="step-content">
                                    <h4>Proses Pembuatan</h4>
                                    <p>Setelah deal, kami akan mulai mengerjakan pesanan custom Anda</p>
                                </div>
                            </div>
                        </div>
                    </div>
                    
                    <div class="custom-form">
                        <h3>Hubungi Kami Sekarang</h3>
                        <form class="contact-form" id="customForm">
                            <div class="form-group">
                                <label for="customerName">Nama Lengkap</label>
                                <input type="text" id="customerName" name="customerName" required>
                            </div>
                            
                            <div class="form-group">
                                <label for="customerEmail">Email</label>
                                <input type="email" id="customerEmail" name="customerEmail" required>
                            </div>
                            
                            <div class="form-group">
                                <label for="customerPhone">No. WhatsApp</label>
                                <input type="tel" id="customerPhone" name="customerPhone" required>
                            </div>
                            
                            <div class="form-group">
                                <label for="customDescription">Deskripsi Produk Custom</label>
                                <textarea id="customDescription" name="customDescription" rows="4" placeholder="Jelaskan detail produk yang Anda inginkan..." required></textarea>
                            </div>
                            
                            <div class="form-group">
                                <label for="budget">Budget (Opsional)</label>
                                <select id="budget" name="budget">
                                    <option value="">Pilih range budget</option>
                                    <option value="under-200k">Di bawah Rp 200.000</option>
                                    <option value="200k-500k">Rp 200.000 - Rp 500.000</option>
                                    <option value="500k-1m">Rp 500.000 - Rp 1.000.000</option>
                                    <option value="above-1m">Di atas Rp 1.000.000</option>
                                </select>
                            </div>
                            
                            <button type="submit" class="submit-btn">
                                <span>üì±</span> Kirim via WhatsApp
                            </button>
                        </form>
                    </div>
                </div>
                
                <div class="custom-gallery">
                    <h3>Contoh Hasil Custom Kami</h3>
                    <div class="gallery-grid">
                        <div class="gallery-item">
                            <img src="https://images.unsplash.com/photo-1601758228041-f3b2795255f1?w=400&h=400&fit=crop&crop=center" alt="Custom Pet Portrait">
                            <p>Custom Pet Portrait</p>
                        </div>
                        <div class="gallery-item">
                            <img src="https://images.unsplash.com/photo-1702142006500-a1ea944a2a67?q=80&w=400&h=400&fit=crop&crop=center" alt="Custom Character Doll">
                            <p>Custom Character Doll</p>
                        </div>
                        <div class="gallery-item">
                            <img src="https://images.unsplash.com/photo-1594638963668-52eb9798e8ca?q=80&w=400&h=400&fit=crop&crop=center" alt="Custom Bag Design">
                            <p>Custom Bag Design</p>
                        </div>
                    </div>
                </div>
            </div>

            <!-- Loading State -->
            <div class="loading" id="loading">
                <p>Loading beautiful handmade products...</p>
            </div>

            <!-- No Results State -->
            <div class="no-results" id="noResults" style="display: none;">
                <p>No products found. Try adjusting your search or filter.</p>
            </div>
        </div>
    </main>

    <footer class="footer">
        <div class="container">
            <p>&copy; 2025 Artfulito. Made with üíù for handmade lovers.</p>
        </div>
    </footer>

    <script>
        // Global variables
        let allProducts = [];
        let filteredProducts = [];
        let currentCategory = 'all';
        let currentSearch = '';

        // DOM elements
        const productsGrid = document.getElementById('productsGrid');
        const customSection = document.getElementById('customSection');
        const loading = document.getElementById('loading');
        const noResults = document.getElementById('noResults');
        const searchInput = document.getElementById('searchInput');
        const filterButtons = document.querySelectorAll('.filter-btn');
        const customForm = document.getElementById('customForm');

        // Load products from JSON
        async function loadProducts() {
            try {
                const response = await fetch('products.json');
                if (!response.ok) {
                    throw new Error('Failed to load products');
                }
                allProducts = await response.json();
                filteredProducts = [...allProducts];
                renderProducts();
                loading.style.display = 'none';
            } catch (error) {
                console.error('Error loading products:', error);
                loading.innerHTML = '<p>Sorry, we couldn\'t load the products. Please try again later.</p>';
            }
        }

        // Format price in IDR
        function formatPrice(price) {
            return new Intl.NumberFormat('id-ID', {
                style: 'currency',
                currency: 'IDR',
                minimumFractionDigits: 0
            }).format(price);
        }

        // Create product card HTML
        function createProductCard(product) {
            return `
                <div class="product-card" data-category="${product.category}">
                    <div class="product-image">
                        <img src="${product.image}" alt="${product.name}" loading="lazy">
                    </div>
                    <div class="product-info">
                        <h3 class="product-name">${product.name}</h3>
                        <p class="product-price">${formatPrice(product.price)}</p>
                        <p class="product-description">${product.description}</p>
                        <div class="product-category">
                            <span class="category-tag">${product.category}</span>
                        </div>
                        <div class="product-actions">
                            <a href="detail.html?id=${product.id}" class="view-detail-btn">Lihat Detail</a>
                        </div>
                    </div>
                </div>
            `;
        }

        // Render products to the grid
        function renderProducts() {
            if (currentCategory === 'custom') {
                // Show custom section, hide products grid
                productsGrid.style.display = 'none';
                customSection.style.display = 'block';
                noResults.style.display = 'none';
                return;
            }
            
            // Hide custom section, show products grid
            customSection.style.display = 'none';
            
            if (filteredProducts.length === 0) {
                productsGrid.style.display = 'none';
                noResults.style.display = 'block';
                return;
            }

            productsGrid.style.display = 'grid';
            noResults.style.display = 'none';
            productsGrid.innerHTML = filteredProducts.map(createProductCard).join('');
        }

        // Filter products by category and search
        function filterProducts() {
            if (currentCategory === 'custom') {
                renderProducts();
                return;
            }
            
            filteredProducts = allProducts.filter(product => {
                const matchesCategory = currentCategory === 'all' || product.category === currentCategory;
                const matchesSearch = currentSearch === '' || 
                    product.name.toLowerCase().includes(currentSearch.toLowerCase()) ||
                    product.description.toLowerCase().includes(currentSearch.toLowerCase());
                return matchesCategory && matchesSearch;
            });
            renderProducts();
        }

        // Handle category filter clicks
        filterButtons.forEach(button => {
            button.addEventListener('click', () => {
                // Update active button
                filterButtons.forEach(btn => btn.classList.remove('active'));
                button.classList.add('active');
                
                // Update current category and filter
                currentCategory = button.dataset.category;
                
                // If custom is selected, scroll to custom section
                if (currentCategory === 'custom') {
                    filterProducts();
                    setTimeout(() => {
                        customSection.scrollIntoView({ behavior: 'smooth' });
                    }, 100);
                } else {
                    filterProducts();
                }
            });
        });

        // Handle search input
        searchInput.addEventListener('input', (e) => {
            currentSearch = e.target.value;
            if (currentCategory !== 'custom') {
                filterProducts();
            }
        });

        // Handle custom form submission
        customForm.addEventListener('submit', (e) => {
            e.preventDefault();
            
            const formData = new FormData(customForm);
            const name = formData.get('customerName');
            const email = formData.get('customerEmail');
            const phone = formData.get('customerPhone');
            const description = formData.get('customDescription');
            const budget = formData.get('budget');
            
            // Create WhatsApp message
            let message = `Halo Artfulito! üëã\n\n`;
            message += `Saya ingin memesan produk custom:\n\n`;
            message += `üìù Nama: ${name}\n`;
            message += `üìß Email: ${email}\n`;
            message += `üì± Phone: ${phone}\n\n`;
            message += `üé® Deskripsi Produk:\n${description}\n\n`;
            
            if (budget) {
                const budgetText = {
                    'under-200k': 'Di bawah Rp 200.000',
                    '200k-500k': 'Rp 200.000 - Rp 500.000',
                    '500k-1m': 'Rp 500.000 - Rp 1.000.000',
                    'above-1m': 'Di atas Rp 1.000.000'
                };
                message += `üí∞ Budget: ${budgetText[budget]}\n\n`;
            }
            
            message += `Mohon informasi lebih lanjut mengenai harga dan waktu pengerjaan. Terima kasih! üôè`;
            
            // Encode message for WhatsApp URL
            const encodedMessage = encodeURIComponent(message);
            const whatsappURL = `https://wa.me/6281234567890?text=${encodedMessage}`;
            
            // Open WhatsApp
            window.open(whatsappURL, '_blank');
        });

        // Initialize the app
        document.addEventListener('DOMContentLoaded', () => {
            loadProducts();
        });
    </script>
</body>
</html>
